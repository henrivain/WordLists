<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WordListsUI.WordTrainingPage.WordTrainingPage"
             xmlns:flipper="clr-namespace:WordListsUI.WordTrainingPage.FlipCardControl"
             xmlns:viewModel="clr-namespace:WordListsViewModels;assembly=WordListsViewModels"
             xmlns:windows="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.WindowsSpecific;assembly=Microsoft.Maui.Controls"
             x:DataType="{x:Type viewModel:IWordTrainingViewModel}"
             Title="Train words" 
             BackgroundColor="#1c1b4d"
             x:Name="WordTrainer"
             >
    <ContentPage.Resources>
        <Style TargetType="{x:Type Label}">
            <Setter Property="TextColor" Value="White"></Setter>
        </Style>
    </ContentPage.Resources>
    <ContentPage.Content>
        <ScrollView >
            <VerticalStackLayout>
                <Grid Margin="40,20,40,0" 
                      ColumnDefinitions="4*, 0.5*, 3*" RowDefinitions="auto, auto">
                    <Label Text="{Binding Title}"
                           FontSize="50"
                           FontAttributes="Bold"
                           />

                    <Label Text="{Binding LanguageHeaders}"
                           Grid.Row="1"
                           FontSize="24"    
                           />

                    <Label Text="{Binding Description}"
                           Margin="0,20,0,0"
                           Grid.RowSpan="2"
                           Grid.Column="2"
                           VerticalTextAlignment="Center"
                           LineBreakMode="WordWrap"    
                           HorizontalOptions="Start"
                           />
                </Grid>

                <Grid ColumnDefinitions="0.5*, 0.8*, 0.5*" 
                      HeightRequest="300"
                      Margin="0,50,0,0"
                      Grid.Row="3"
                      >
                    <flipper:WordPairFlipCard Grid.Column="1"
                                              x:Name="flipper"
                                              VerticalOptions="FillAndExpand"
                                              Margin="0,0"
                                              WordPair="{Binding VisibleWordPair}"
                                              />
                </Grid>
                
                <Grid ColumnDefinitions="*,0.2*,*" Margin="0,25,0,50" >
                    <Grid.Resources>
                        <Style TargetType="{x:Type ImageButton}">
                            <Setter Property="HeightRequest" Value="40"/>
                            <Setter Property="WidthRequest" Value="40"/>
                            <Setter Property="CornerRadius" Value="20"/>
                            <Setter Property="Padding" Value="2"/>
                            <Setter Property="Margin" Value="20,0"/>
                        </Style>
                    </Grid.Resources>
                    <ImageButton Source="arrow.png" 
                                 IsEnabled="{Binding CanFlipLast}"
                                 BackgroundColor="Transparent"
                                 Rotation="180"
                                 HorizontalOptions="End"
                                 Clicked="Button_LastCard"
                                 >

                    </ImageButton>
                    <Label Grid.Column="1"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           >
                        <Label.Text>
                            <MultiBinding StringFormat="{}{0}/{1}">
                                <Binding Path="CurrentWordIndex"/>
                                <Binding Path="MaxWordIndex"/>
                            </MultiBinding>
                        </Label.Text>
                    </Label>
                    <ImageButton Source="arrow.png" 
                                 IsEnabled="{Binding CanFlipNext}"
                                 BackgroundColor="Transparent"
                                 HorizontalOptions="Start"
                                 Grid.Column="2"
                                 Clicked="Button_NextCard"
                                 >
                    </ImageButton>
                </Grid>
            </VerticalStackLayout>
        </ScrollView>
    </ContentPage.Content>
</ContentPage>